[
  {
    "pk": 1, 
    "model": "reports.sqlreport", 
    "fields": {
      "query": "\nSELECT cases.meta_username AS 'Healthcare Worker',\n       cases.cnt AS '# of Patients',\n       hi_risk.cnt AS '# of High Risk',\n       followups.cnt AS '# of Follow Up',\n       intel_clinic.name AS 'Clinic',\n   intel_clinic.id AS 'Clinic ID'  \nFROM  intel_userclinic, intel_clinic, (\n  SELECT sampledata_meta_userid, meta_username, COUNT(sampledata_case_id) AS cnt\n  FROM schema_intel_grameen_safe_motherhood_registration_v0_3\n  GROUP BY meta_username \n) cases LEFT OUTER JOIN\n(\n  SELECT meta_username, COUNT(*) AS cnt\n  FROM (\n     SELECT meta_username, sampledata_case_id\n     FROM schema_intel_grameen_safe_motherhood_registration_v0_3\n     WHERE sampledata_hi_risk = 'yes'\n  ) hi_risk_cases\n  GROUP BY meta_username\n) hi_risk\n  ON cases.meta_username = hi_risk.meta_username\n  LEFT OUTER JOIN\n(  SELECT meta_username, COUNT(*) AS cnt\n   FROM schema_intel_grameen_safe_motherhood_followup_v0_2\n GROUP BY meta_username \n) followups\nON followups.meta_username = hi_risk.meta_username\nWHERE cases.meta_username = intel_userclinic.username AND intel_userclinic.clinic_id = intel_clinic.id ORDER BY clinic, followups.meta_username\n",
      "domain": 3, 
      "description": "Summary of data by health worker", 
      "title": "Data by Mobile Healthcare Worker"
    }
  }, 
  {
    "pk": 2, 
    "model": "reports.sqlreport", 
    "fields": {
      "query": "SELECT sampledata_case_id as 'Case ID',\n       meta_username as 'Healthcare Worker',\n       sampledata_mother_name as 'Mother Name',\n       sampledata_address as 'Address',\n       sampledata_hi_risk as 'Hi Risk?',\n       'No' as 'Follow up?', /* need to fix this when we actually have FU */\n       schema_intel_grameen_safe_motherhood_registration_v0_3.id as 'Instance ID'\nFROM schema_intel_grameen_safe_motherhood_registration_v0_3, intel_userclinic \n{{whereclause}} \n{{orderby}}",
      "domain": 3, 
      "is_active": 0, 
      "description": "Summary view of individual mother data by health workers", 
      "title": "Health Worker Submission Details"
    }
  }, 
  {
    "pk": 1, 
    "model": "reports.columnformatter", 
    "fields": {
      "report": 1, 
      "header": "# of Patients", 
      "display_format": "<a href=\"/reports/3/custom/chw_submission_details?meta_username=%(Healthcare Worker)s\">%(value)s</a>"
    }
  }, 
  {
    "pk": 2, 
    "model": "reports.columnformatter", 
    "fields": {
      "report": 1, 
      "header": "# of High Risk", 
      "display_format": "<a href=\"/reports/3/custom/chw_submission_details?meta_username=%(Healthcare Worker)s&sampledata_hi_risk=yes\">%(value)s</a>"
    }
  }
]
